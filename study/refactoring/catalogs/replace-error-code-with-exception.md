# 11.12 ì˜¤ë¥˜ ì½”ë“œë¥¼ ì˜ˆì™¸ë¡œ ë°”ê¾¸ê¸°(Replace Error Code with Exception)

í”„ë¡œê·¸ë¨ì˜ ì •ìƒ ë™ì‘ ë²”ì£¼ì— ë“¤ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë¦¬íŒ©í„°ë§

## ğŸ—£ ì„¤ëª…

### ğŸ§ As is

```typescript
function localShippingRules(country: string) {
  const data = countryData.shippingRules[country];
  if (data) return new ShippingRules(data);
  else return -23;
}

function calculateShippingCosts(anOrder: object) {
  // ê´€ë ¨ ì—†ëŠ” ë¡œì§
  const shippingRules = localShippingRules(anOrder.country);
  if (shippingRules < 0) return shippingRules; // ì˜¤ë¥˜ ì „íŒŒ
  // ê´€ë ¨ ì—†ëŠ” ë¡œì§
}

const status = calculateShippingCosts(orderData);
if (status < 0) errorList.push({ order: orderData, errorCode: status });
```

### ğŸ˜ To be

```typescript
function localShippingRules(country: string) {
  const data = countryData.shippingRules[country];
  if (data) return new ShippingRules(data);
  else throw new OrderProceessingError(-23);
}

function calculateShippingCosts(anOrder: object) {
  // ê´€ë ¨ ì—†ëŠ” ë¡œì§
  const shippingRules = localShippingRules(anOrder.country);
  // ê´€ë ¨ ì—†ëŠ” ë¡œì§
}

try {
  calculateShippingCosts(orderData);
} catch (e) {
  if (e instanceof OrderProcessingError)
    errorList.push({ order: orderData, errorCode: status });
  else throw e;
}
```

### ğŸ“‹ ìƒì„¸

ì˜ˆì™¸ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì œê³µí•˜ëŠ” ë…ë¦½ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. ê·¸ëŸ¬ë©´ ì ì ˆí•œ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ì½œìŠ¤íƒì„ íƒ€ê³  ìœ„ë¡œ ì „íŒŒëœë‹¤. ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ì¼ì¼ì´ ê²€ì‚¬í•˜ê±°ë‚˜ ì˜¤ë¥˜ë¥¼ ì‹ë³„í•´ ì½œìŠ¤íƒ ìœ„ë¡œ ë˜ì§€ëŠ” ì¼ì„ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ëœë‹¤.
ì˜ˆì™¸ëŠ” ì •êµí•œ ë©”ì»¤ë‹ˆì¦˜ì´ì§€ë§Œ ëŒ€ë‹¤ìˆ˜ì˜ ë‹¤ë¥¸ ì •êµí•œ ë©”ì»¤ë‹ˆì¦˜ê³¼ ê°™ì´ ì •í™•í•˜ê²Œ ì‚¬ìš©í•  ë•Œë§Œ ìµœê³ ì˜ íš¨ê³¼ë¥¼ ë‚¸ë‹¤. ì˜ˆì™¸ëŠ” ì •í™•íˆ ì˜ˆìƒ ë°–ì˜ ë™ì‘ì¼ ë•Œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.

### âš™ï¸ ì ˆì°¨

1. ì½œìŠ¤íƒ ìƒìœ„ì— í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ì˜ˆì™¸ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•œë‹¤.

   â†’ ì´ í•¸ë“¤ëŸ¬ëŠ” ì²˜ìŒì—ëŠ” ëª¨ë“  ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë˜ì§€ê²Œ í•´ë‘”ë‹¤.

   â†’ ì ì ˆí•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” í•¸ë“¤ëŸ¬ê°€ ì´ë¯¸ ìˆë‹¤ë©´ ì§€ê¸ˆì˜ ì½œìŠ¤íƒë„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í™•ì¥í•œë‹¤.

2. í…ŒìŠ¤íŠ¸í•œë‹¤.
3. í•´ë‹¹ ì˜¤ë¥˜ ì½”ë“œë¥¼ ëŒ€ì²´í•  ì˜ˆì™¸ì™€ ê·¸ ë°–ì˜ ì˜ˆì™¸ë¥¼ êµ¬ë¶„í•  ì‹ë³„ ë°©ë²•ì„ ì°¾ëŠ”ë‹¤.

   â†’ ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì— ë§ê²Œ ì„ íƒí•˜ë©´ ëœë‹¤. ëŒ€ë¶€ë¶„ ì–¸ì–´ì—ì„œëŠ” ì„œë¸Œí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤.

4. ì •ì  ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.
5. catchì ˆì„ ìˆ˜ì •í•˜ì—¬ ì§ì ‘ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ëŠ” ì ì ˆíˆ ëŒ€ì²˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šì€ ì˜ˆì™¸ëŠ” ë‹¤ì‹œ ë˜ì§„ë‹¤.
6. í…ŒìŠ¤íŠ¸í•œë‹¤.
7. ì˜¤ë¥˜ ì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” ê³³ ëª¨ë‘ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§€ë„ë¡ ìˆ˜ì •í•œë‹¤. í•˜ë‚˜ì”© ìˆ˜ì •í•  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸í•œë‹¤.
8. ëª¨ë‘ ìˆ˜ì •í–ˆë‹¤ë©´ ê·¸ ì˜¤ë¥˜ ì½”ë“œë¥¼ ì½œìŠ¤íƒ ìœ„ë¡œ ì „ë‹¬í•˜ëŠ” ì½”ë“œë¥¼ ëª¨ë‘ ì œê±°í•œë‹¤. í•˜ë‚˜ì”© ìˆ˜ì •í•  ë•Œë§ˆë‹¤ í…ŒìŠ¤íŠ¸í•œë‹¤.

   â†’ ë¨¼ì € ì˜¤ë¥˜ ì½”ë“œë¥¼ ê²€ì‚¬í•˜ëŠ” ë¶€ë¶„ì„ í•¨ì •ìœ¼ë¡œ ë°”ê¾¼ ë‹¤ìŒ, í•¨ì •ì— ê±¸ë ¤ë“¤ì§€ ì•ŠëŠ”ì§€ í…ŒìŠ¤íŠ¸í•œ í›„ ì œê±°í•˜ëŠ” ì „ëµì„ ê¶Œí•œë‹¤. í•¨ì •ì— ê±¸ë ¤ë“œëŠ” ê³³ì´ ìˆë‹¤ë©´ ì˜¤ë¥˜ ì½”ë“œë¥¼ ê²€ì‚¬í•˜ëŠ” ì½”ë“œê°€ ì•„ì§ ë‚¨ì•„ìˆë‹¤ëŠ” ëœ»ì´ë‹¤. í•¨ì •ì„ ë¬´ì‚¬íˆ í”¼í–ˆë‹¤ë©´ ì•ˆì‹¬í•˜ê³  ë³¸ë¬¸ì„ ì •ë¦¬í•˜ì.

## ğŸ“ë©”ëª¨

ì €ìëŠ” ì˜ˆì™¸ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ë ¤ë©´ ì˜ˆìƒ ë°–ì˜ ë™ì‘ì¼ ë•Œì—ë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤ê³  ê°•ì¡°í•œë‹¤.
ì¦‰, ì •ìƒ ë™ì‘ ë²”ì£¼ì— ë“œëŠ” ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•  ë–„ëŠ” ì˜ˆì™¸ ëŒ€ì‹  ì˜¤ë¥˜ë¥¼ ê²€ì¶œí•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì •ìƒ íë¦„ìœ¼ë¡œ ë˜ëŒë¦¬ê²Œë” ì²˜ë¦¬í•´ì•¼ í•œë‹¤.
